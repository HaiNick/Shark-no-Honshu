---
description: GNU Debugger
---

# gdb - DNU Debugger

<details>

<summary>Links:</summary>

[https://www.youtube.com/watch?v=VroEiMOJPm8\&list=PLhixgUqwRTjxglIswKp9mpkfPNfHkzyeN\&index=6](https://www.youtube.com/watch?v=VroEiMOJPm8\&list=PLhixgUqwRTjxglIswKp9mpkfPNfHkzyeN\&index=6)

</details>

**GDB** ist ein leistungsfähiger Kommandozeilen-Debugger für C, C++, Go, Rust und andere Sprachen. Er ermöglicht das Untersuchen und Steuern eines Programms während der Ausführung.

```
# Datei öffnen
gdb <file>

# Andere Ausgabe des disassembly-codes setzen (intel)
set disassembly-flavor intel

# main disassemblen
disassemble main

# Register anzeigen
info registers

# Breakpoint auf main setzen
break *main

# Breakpoints anzeigen
info breakpoints

# Stack anzeigen
info stack
```

### Installation

```bash
sudo apt install gdb
```

### Start eines Programms

```bash
gdb <programm>
gdb --args <programm> <arg1> <arg2>
```

### Grundlagen

| Befehl            | Beschreibung                   |
| ----------------- | ------------------------------ |
| `run` (oder `r`)  | Startet das Programm           |
| `quit` (oder `q`) | Beendet GDB                    |
| `help`            | Zeigt Hilfe an                 |
| `file <prog>`     | Lädt eine ausführbare Datei    |
| `core <corefile>` | Lädt ein Core-Dump             |
| `set args ...`    | Setzt Programmargumente        |
| `start`           | Startet und stoppt im `main()` |

### Breakpoints & Watchpoints

| Befehl                  | Beschreibung             |
| ----------------------- | ------------------------ |
| `break <funktion>`      | Breakpoint in Funktion   |
| `break <datei>:<zeile>` | Breakpoint in Datei      |
| `break *0xADDR`         | Breakpoint an Adresse    |
| `info breakpoints`      | Listet Breakpoints       |
| `delete <nr>`           | Löscht Breakpoint        |
| `disable/enable <nr>`   | (De)aktiviert Breakpoint |
| `watch <var>`           | Watchpoint auf Variable  |
| `rwatch <var>`          | Watchpoint bei Lesen     |
| `awatch <var>`          | Bei Lesen/Schreiben      |

### Programmfluss

| Befehl                | Beschreibung                                  |
| --------------------- | --------------------------------------------- |
| `continue` (oder `c`) | Fortsetzen bis nächster Breakpoint            |
| `next` (oder `n`)     | Nächster Befehl (ohne in Funktionen zu gehen) |
| `step` (oder `s`)     | Einzelschritt (steigt in Funktionen ein)      |
| `finish`              | Führt Funktion bis zum Ende aus               |
| `until`               | Führt aus bis zu einer bestimmten Zeile       |
| `return`              | Verlässt aktuelle Funktion                    |

### Stack & Frames

| Befehl                  | Beschreibung               |
| ----------------------- | -------------------------- |
| `backtrace` (oder `bt`) | Stack-Trace anzeigen       |
| `frame <nr>`            | Wechselt zu Stack-Frame    |
| `info frame`            | Details zu aktuellem Frame |
| `up` / `down`           | Im Stack auf-/absteigen    |

### Variablen & Speicher

| Befehl                 | Beschreibung                                 |
| ---------------------- | -------------------------------------------- |
| `print <ausdruck>`     | Gibt Wert aus                                |
| `set var <var>=<wert>` | Setzt Wert                                   |
| `display <var>`        | Zeigt Variable bei jedem Halt                |
| `undisplay <nr>`       | Entfernt automatische Anzeige                |
| `x/<n><f> <adresse>`   | Speicher anzeigen (`f`: Format, `n`: Anzahl) |

**Formate für `x`:**

* `x` = hex
* `d` = dezimal
* `s` = String
* `i` = Instruktion
* `c` = char
* Beispiel: `x/4xb 0x601000`

### Disassemblieren

```bash
disassemble <funktion>
x/10i $pc
layout asm        # TUI-Modus für Assembly
```

### Register

```bash
info registers
print $eax
set $rax = 0x0
```

### TUI-Modus (Text User Interface)

```bash
gdb -tui <programm>
Ctrl+X A   # TUI ein/aus
layout src/asm/reg
```

### Remote Debugging

```bash
target remote <ip>:<port>
```

Z.B. für `gdbserver`:

```bash
gdb ./prog
target remote localhost:1234
```

### Skripting

#### GDB-Skripte (.gdb)

```gdb
file a.out
break main
run
```

Ausführen mit:

```bash
gdb -x script.gdb
```

#### Python in GDB

```python
python print(gdb.execute("info registers", to_string=True))
```

### Sonstiges

| Befehl                              | Beschreibung              |
| ----------------------------------- | ------------------------- |
| `info functions`                    | Alle Funktionen anzeigen  |
| `info locals`                       | Lokale Variablen          |
| `info variables`                    | Globale Variablen         |
| `info threads`                      | Threads anzeigen          |
| `thread <nr>`                       | Zu Thread wechseln        |
| `detach`                            | Trennt das Debugging-Ziel |
| `set follow-fork-mode child/parent` | Fork-Verhalten steuern    |

***

{% hint style="info" %}
**Hinweis:** Für optimierte Programme `-g` zum Kompilieren verwenden, z.B.:

`gcc -g -O0 prog.c -o prog`
{% endhint %}
