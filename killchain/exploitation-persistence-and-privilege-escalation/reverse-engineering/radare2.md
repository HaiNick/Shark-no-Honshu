# Radare2

**radare2** ist ein reverses Engineering-Framework zur Analyse, Untersuchung, Patching und Debugging von Binärdateien. Unterstützt viele Formate (ELF, PE, Mach-O) und Architekturen.

### Installation

```bash
sudo apt install radare2
# oder
git clone https://github.com/radareorg/radare2 && ./sys/install.sh
```

### Programm starten

```bash
r2 <binärdatei>
r2 -d <binärdatei>     # im Debug-Modus
```

### Grundlagen

| Befehl         | Beschreibung                |
| -------------- | --------------------------- |
| `q`            | Beenden                     |
| `?`            | Hilfe                       |
| `aa`           | Analyse aller Funktionen    |
| `aaa`          | Aggressive Analyse          |
| `afl`          | Auflistung aller Funktionen |
| `af`           | Funktion definieren         |
| `pdf @ <addr>` | Funktion disassemblieren    |
| `s <addr>`     | Zu Adresse springen         |
| `V`            | Visual Mode (Disassembly)   |
| `VV`           | Visual Function Graph       |
| `iI`           | Infos zur Datei             |
| `izz`          | Strings anzeigen            |

### Navigation

| Befehl         | Beschreibung        |
| -------------- | ------------------- |
| `s`            | Setze Offset        |
| `s+ 0x100`     | Springe vor         |
| `s- 0x100`     | Springe zurück      |
| `s main`       | Gehe zu Symbol      |
| `s @ sym.main` | Exakte Adressierung |

### Disassemblierung & Analyse

| Befehl  | Beschreibung                        |
| ------- | ----------------------------------- |
| `pd 10` | 10 Instruktionen disassemblieren    |
| `px 32` | 32 Bytes als Hex anzeigen           |
| `agf`   | Graphen der aktuellen Funktion      |
| `V`     | Visual-Modus (mit `hjkl` steuerbar) |
| `VV`    | Visual Graph Mode                   |
| `afl`   | Liste aller Funktionen              |
| `afvd`  | Variablen in Funktion anzeigen      |

### Debugging

```bash
r2 -d ./prog
```

| Befehl       | Beschreibung              |
| ------------ | ------------------------- |
| `dc`         | Continue                  |
| `ds`         | Step                      |
| `dso`        | Step over                 |
| `db <addr>`  | Breakpoint setzen         |
| `db- <addr>` | Breakpoint löschen        |
| `dr`         | Register anzeigen         |
| `dr eax=0`   | Register setzen           |
| `dm`         | Speicherbereiche anzeigen |
| `dmm`        | Maps anzeigen             |
| `dmi`        | Infos zu Segmenten        |
| `env`        | Umgebung anzeigen         |

### Strings & Daten

| Befehl  | Beschreibung                             |
| ------- | ---------------------------------------- |
| `iz`    | Strings in Binärdatei                    |
| `izz`   | Alle Strings (mit Analyse)               |
| `ps 32` | 32 Zeichen ab aktueller Adresse anzeigen |
| `pc`    | String als C-String anzeigen             |

### Binär-Patching

| Befehl             | Beschreibung                         |
| ------------------ | ------------------------------------ |
| `wa <instr>`       | Assembliert und schreibt Instruktion |
| `wx <hex>`         | Schreibt Hex-Bytes                   |
| `oo+`              | Öffnet Datei im Schreibmodus         |
| `s <addr>; wa nop` | Schreibe NOP an Adresse              |
| `wopO`             | Patch-Operationen anzeigen           |
| `wop`              | Letzten Patch rückgängig machen      |

### Suchen

| Befehl       | Beschreibung               |
| ------------ | -------------------------- |
| `/ <string>` | Suche String               |
| `/x <hex>`   | Suche Hex-Pattern          |
| `/c <instr>` | Suche Opcode               |
| `axt <addr>` | Referenzen zu Adresse      |
| `axtj`       | JSON-Format für Referenzen |

### Projekt speichern / laden

```bash
Ps <name>   # Speichern
Po <name>   # Laden
```

### Visual Mode (interaktiv)

| Taste   | Funktion                                    |
| ------- | ------------------------------------------- |
| `V`     | Visual Mode starten                         |
| `p`     | Darstellung wechseln (Bytes, Opcode, Graph) |
| `Enter` | Springe zu Adresse                          |
| `q`     | Zurück / Beenden                            |

### Skripting

#### Radare2-Skripte

```bash
r2 -i script.r2 binary
```

#### Beispiel (script.r2)

```r2
aa
s main
pdf
```

### JSON-Ausgabe (für Automatisierung)

```bash
r2 -q0 -c "pdj 10" ./binary
```

